function onNewPlayerJoin(o){console.log(o+" joined!"),document.getElementById("aloneMes").innerHTML=""}function onLoad(){setupSocket()}function setRoomIndex(o){ROOM_INDEX=o}function setRoomName(o){ROOM_NAME=o}function onJoinRoom(o){setRoomName(o.roomName),console.log("Joined Room "+o.roomName+" on team "+o.team),0==o.roomIndex&&(document.getElementById("aloneMes").innerHTML="<h1>You joined by yourself! Invite some friends to join!!</h1>"),document.getElementById("team").innerHTML="<h1 style='color:"+o.mapData.teamNames[o.team]+"'>You are on team "+o.mapData.teamNames[o.team]+"</h1>",displayMapFromRoomData(o),setTimeout(function(){socket.emit("roomLoaded",{})},10)}function displayMapFromRoomData(o){document.getElementsByClassName("mapHolder")[0].innerHTML=RadioWars.templates.map(o)}function onMouseBroadcast(o){}function onRadioClick(o,e){socket.emit("radioBroadcast",{state:o,radioIndex:e})}function onRadioBroadcast(o){function e(o){if(void 0===onRadioBroadcast.times[o.radioIndex]&&(onRadioBroadcast.times[o.radioIndex]=-1),o.time>onRadioBroadcast.times[o.radioIndex]){var e=document.getElementById("button_"+o.state+"_"+o.radioIndex);e.checked=!0,e.parentNode.parentNode.classList.remove("red-selected","blue-selected");var n=e.parentNode.innerHTML.split(">")[1]+"-selected";e.parentNode.parentNode.classList.add(n),onRadioBroadcast.prevClass=n,onRadioBroadcast.times[o.radioIndex]=o.time}}for(onRadioBroadcast.queue.push(o);onRadioBroadcast.queue.length>0;)e(onRadioBroadcast.queue.pop())}function onWin(o){console.log("Team "+o.winningTeam+" Won!"),document.getElementsByClassName("mapHolder")[0].innerHTML="<h1 style='color:"+o.winningTeam+"'>"+o.winningTeam+" WON! </h1>"}function login(o){socket.emit("login",o)}function gotoRoom(o){hideButtons(),socket.emit("gameroom",o)}function hideButtons(){for(var o=document.getElementsByClassName("roomButtons")[0],e=o.children,n=0;n<e.length;n++)e[n].style.visibility="hidden"}function indexOfTwoTupleInArray(o,e){for(var n=0;n<e.length;n++){var t=e[n];if(t[0]==o[0]&&t[1]==o[1])return n}return-1}function box(o,e,n,t){function a(a,i){var r=a-e,d=i-o;return!(0>r||0>d||d>=n||r>=t)}function i(o,e,n,t){var i=o+n,r=e+t;return a(o,e)||a(i,e)||a(o,r)||a(i,r)}return{hitsPoint:a,hitsBox:i}}function mousePredictor(o,e,n,t,a){var i=[];i[0]=t[0]+t[0]-a[0],i[1]=t[1]+t[1]-a[1];var r=[];return r[0]=e[0]+o*(t[0]+i[0])/2,r[1]=e[1]+o*(t[1]+i[1])/2,function(n){return[e[0]+n*t[0]+(r[0]+n*i[0]-e[0]-n*t[0])*(n/o),e[1]+n*t[1]+(r[1]+n*i[1]-e[1]-n*t[1])*(n/o)]}}function setupSocket(){socket=io.connect(window.location.href),socket.on("radiosToRoom",onRadioBroadcast),socket.on("newPlayer",onNewPlayerJoin),socket.on("roomIndex",setRoomIndex),socket.on("joinedRoom",onJoinRoom),socket.on("win",onWin)}var ROOM_INDEX=null,ROOM_NAME="";onRadioBroadcast.times=[],onRadioBroadcast.queue=[],document.addEventListener("DOMContentLoaded",onLoad),Handlebars.registerHelper("map",function(o,e){for(var n=[],t=0;t<o.startFields.length;t++){var a=o.startFields[t];n.push(box(a.y,a.x,a.height,a.width))}ret='<div style="width:'+102*o.mapGridSize[0]+"px; height:"+102*o.mapGridSize[1]+'px">';for(var i=0;i<o.mapGridSize[1];i++)for(var t=0;t<o.mapGridSize[0];t++){for(var r="",d=""+t+"x"+i,s=0;s<n.length;s++)n[s].hitsPoint(t,i)&&(r+=" "+o.teamNames[s]+"-spawn");var m=indexOfTwoTupleInArray([t,i],o.radioGridLoc);ret+=e.fn({teams:o.teamNames.map(function(o,e){return{team:o,teamNum:e,groupName:d,radioIndex:m}}),isRadio:-1!==m,startTeamClass:r})}return ret+="</div>",ret});var socket;